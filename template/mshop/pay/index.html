{extend name="common/index"/}
{block name="title"}购物车结算 - {/block}
{block name="content"}
<div class="weui-form-preview">
    <div class="weui-form-preview__hd">
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">付款金额</label>
            <em class="weui-form-preview__value">¥2400.00</em>
        </div>
    </div>
    <div class="weui-form-preview__bd">
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">订单号</label>
            <span class="weui-form-preview__value">{:guid()}</span>
        </div>
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">商品</label>
            <span class="weui-form-preview__value">电动打蛋机</span>
        </div>

        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">单价</label>
            <span class="weui-form-preview__value">4</span>
        </div>
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">购买数量</label>
            <span class="weui-form-preview__value">4</span>
        </div>
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">创建时间</label>
            <span class="weui-form-preview__value"></span>
        </div>
    </div>
    <div class="weui-form-preview__ft">
        <a class="weui-form-preview__btn weui-form-preview__btn_primary" href="javascript:" onclick="callpay()">微信安全支付</a>
    </div>
</div>
{/block}
{block name="footer"}{/block}
{block name="js"}
<script type="text/javascript">
    //调用微信JS api 支付
    function jsApiCall(){
        WeixinJSBridge.invoke('getBrandWCPayRequest', {$jsApiParameters},
        function(res){
            WeixinJSBridge.log(res.err_msg);
        });
    }

    function callpay() {
        if (typeof WeixinJSBridge == "undefined"){
            if( document.addEventListener ){
                document.addEventListener('WeixinJSBridgeReady', jsApiCall, false);
            }else if (document.attachEvent){
                document.attachEvent('WeixinJSBridgeReady', jsApiCall);
                document.attachEvent('onWeixinJSBridgeReady', jsApiCall);
            }
        }else{
            jsApiCall();
        }
    }
</script>
{/block}